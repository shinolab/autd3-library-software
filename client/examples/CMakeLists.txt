cmake_minimum_required(VERSION 3.1)

set (CMAKE_CXX_STANDARD 17)

include_directories(${PROJECT_SOURCE_DIR}/include ${EIGEN_PATH} examples)

file(GLOB hpp_files examples/*.hpp)

if(ENABLE_PRIMITIVE_GAIN)
add_definitions(-DENABLE_PRIMITIVE_GAIN)
endif()
if(ENABLE_HOLO_GAIN)
add_definitions(-DENABLE_HOLO_GAIN)
endif()

if(ENABLE_SOEM_LINK)
  add_executable(example_soem soem.cpp ${hpp_files})
  target_link_libraries(example_soem autd3)
  target_link_libraries(example_soem link_soem)
  if(ENABLE_PRIMITIVE_MODULATION)
    target_link_libraries(example_soem modulation_primitive)
  endif()
  if(ENABLE_PRIMITIVE_GAIN)
    target_link_libraries(example_soem gain_primitive)
  endif()
  if(ENABLE_HOLO_GAIN)
    target_link_libraries(example_soem gain_holo)
  endif()
  if(WIN32)
    target_link_libraries(example_soem ws2_32.lib)
    target_link_libraries(example_soem winmm.lib)
  elseif(APPLE)
    target_link_libraries(example_soem pcap)
  else()
    target_link_libraries(example_soem rt)
  endif()
endif()

if(ENABLE_DEBUG_LINK)
  add_executable(example_debug debug.cpp ${hpp_files})
  target_link_libraries(example_debug autd3 link_debug)
  if(ENABLE_PRIMITIVE_MODULATION)
    target_link_libraries(example_debug modulation_primitive)
  endif()
  if(ENABLE_PRIMITIVE_GAIN)
    target_link_libraries(example_debug gain_primitive)
  endif()
  if(ENABLE_HOLO_GAIN)
    target_link_libraries(example_debug gain_holo)
  endif()    
  if(WIN32)
    target_link_libraries(example_debug ws2_32.lib)
    target_link_libraries(example_debug winmm.lib)
  elseif(APPLE)
    target_link_libraries(example_debug pcap)
  else()
    target_link_libraries(example_debug rt)
  endif()
endif()

if(WIN32)
  if(ENABLE_TWINCAT_LINK)
    add_executable(example_twincat twincat.cpp ${hpp_files})
    target_link_libraries(example_twincat autd3)
    target_link_libraries(example_twincat ws2_32.lib)
    target_link_libraries(example_twincat winmm.lib)
    target_link_libraries(example_twincat link_twincat)
    if(ENABLE_PRIMITIVE_MODULATION)
      target_link_libraries(example_twincat modulation_primitive)
    endif()
    if(ENABLE_PRIMITIVE_GAIN)
      target_link_libraries(example_twincat gain_primitive)
    endif()
    if(ENABLE_HOLO_GAIN)
      target_link_libraries(example_twincat gain_holo)
    endif()    
  endif()  
  if(ENABLE_EMULATOR_LINK)
    add_executable(example_emulator emulator.cpp ${hpp_files})
    target_link_libraries(example_emulator autd3 link_emulator)
    target_link_libraries(example_emulator ws2_32.lib)
    target_link_libraries(example_emulator winmm.lib)
    if(ENABLE_PRIMITIVE_MODULATION)
      target_link_libraries(example_emulator modulation_primitive)
    endif()
    if(ENABLE_PRIMITIVE_GAIN)
      target_link_libraries(example_emulator gain_primitive)
    endif()
    if(ENABLE_HOLO_GAIN)
      target_link_libraries(example_emulator gain_holo)
    endif() 
  endif()
endif()
